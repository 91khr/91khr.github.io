---
title: "大概是篇Vim入门教程(2): 配置和(基本的)Vimscript"
author: Senioria
description: "(非常非常基本(小声((("
---

在[上一篇文章](vim_tutor-basic_concept.html)里, 我们讨论了Vim的一些基本操作.
然而, 默认的Vim就像默认的Emacs一样, 又丑又并不好用;
所以, 这里将介绍一下Vim的配置, 以及它的配置(和脚本)语言Vimscript.

---

Vim是一个有着UNIX血统的编辑器, 所以它的所有配置都是通过人类可读形式的配置文件来指定的.[^conf_file]
按照UNIX的习惯(以及兼容性), Vim的(用户)配置文件有这么几个(`:help vimrc`),
都位于用户的家目录下(对于*NIX, 是`~`, 对于Windows, 是`%userprofile%`):

[^conf_file]: 唔这么说其实逻辑上不完全正确, 但是为了简化讨论起见就这么说了吧><

- `.exrc`, 本来是ex/vi的配置文件, 因为兼容所以也可以被Vim读取, 在有vimrc的时候不会被读取;
- `.vimrc`, "正统"的配置文件, 也是Vim读取优先级最高的;
- `.vim/vimrc`, 另一个意义上的"正统"的配置文件, 在找不到上一个的时候会被读取.

---

> C++ is not designed, it grows

C++之父大概曾经这么说过~~反正大意对了~~, 对于Vimscript来说,
事情也是一样的: Vi的用户需要用一些选项来控制Vi(比如缩进用Tab还是空格, 一个Tab几个空格之类的),
也需要能够自定义一些键绑定; Vi选择了一种类似shell命令的语法, 这一语法也被Vim继承下来, 最终发展为Vimscript.

讲完(似乎是没必要的)历史之后, 我们(终于)来介绍一下Vim的一些有用的命令.

# `:help`/`:h`

(嗯对, 这个是最重要的

用法就是简单的`:help topic`, 其中topic是一个帮助主题.
直接`:help`会打开一个目录性质的帮助文件.
(引战: 私以为这个帮助系统做得比Emacs的那个新人友好得多了,
虽然Emacs默认的那个启动页面也特别好看.)

帮助主题除了描述性的短语~~(最没用的部分:\ 只有知道了要看什么才能看到)~~,
主要还有以下几种:

- `:command`, 其中command是一个命令, 查看这个命令的帮助
- `'option'`, 其中option是一个可以由`:set`命令设置的选项, 查看这个选项的帮助

(其实直接`:h`一下然后往下看就能知道该怎么查帮助了

# 设置选项: `:set`

Vim自己的选项都在这个命令里了(虽然也只能设置Vim自己的选项).
语法是`:set option1 option2...`, 其中option1, option2都是选项, 可以有零个或多个这样的选项,
每一个的语法都是`name=value`或者`name`, 选项之间以空格分割;
如果选项的值里有空格, 用`\ `来转义(相应的, 如果有`\`, 用`\\`来转义).
如果没有指定选项的话, 会列出所有被更改过的选项.

`name`形式的选项是布尔型的(i.e. 它们是"开关"),
可以用`name`来打开, 用`noname`(选项的名称前面加`no`)来关闭.
`name=value`形式的选项就如同它的形式所暗示的一样, 是在设置一个选项的值;
对于这些选项, 也可以用`name+=value`或者`name-=value`来从一系列值中加上一个或者去掉一个.
可以用`:set name?`的形式(可以指定多个选项)来查询某个选项的值,
对于非布尔型的选项, 直接`:set name`也可以.

常用(i.e. 让Vim最小限度的像个现代编辑器)的选项有这些:

- `'backspace'`(`'bs'`): 设置backspace键的行为(默认的Vi行为不会真的有人用吧x),
  一般直接`bs=3`就是一般编辑器的行为.

- `'tabstop'`(`'ts'`), `'shiftwidth'`(`'sw'`), `'expandtab'`(`'et'`):
  虽然是三个不同的选项但是关联比较紧密所以senioria就放到一起了.

  `'ts'`指定一个tab等于的空格个数, `'sw'`指定每层缩进使用的空格个数,
  `'et'`指定是否要展开tab(i.e. 把tab按照`'ts'`变成对应数量的空格).
  (当然对于makefile, 无论`'et'`为何都不会展开规则里的tab的)

- `'incsearch'`(`'is'`): 是否使用增量搜索, i.e. 搜索的时候实时显示当前搜索词的搜索结果.

- `'hlsearch'`(`'hls'`): 是否高亮搜索结果

- `'wildmenu'`(`'wmnu'`): 是否在命令模式使用更好的补全(似乎不开这个选项就根本没有补全x)

- `'compatible'`(`'cp'`): 是否开启Vi兼容模式

senioria自己的设置是这样的: `:set bs=2 ts=4 sw=4 et is hls wmnu nocp`.

另外还有一些重要但是可能并不是对所有人都很有用的东西:

- `'number'`(`'nu'`): 是否显示行号

